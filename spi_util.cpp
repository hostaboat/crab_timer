#include <cstdint>
#include <kinetis.h>
#include "spi_util.h"

#ifndef F_BUS
# error "F_BUS not defined"
#endif

////////////////////////////////////////////////////////////////////////////////
// Clock and Transfer Attributes
// uint32_t sck   - frequency in Hz
// uint32_t t_csc - the delay between assertion of PCS and the first edge of SCK
// uint32_t t_asc - the delay between the last edge of SCK and negation of PCS
// uint32_t t_dt  - the time between negation of PCS and next assertion of PCS
// This function returns the relevant bits for use in the CTAR field.
uint32_t CTAR(uint32_t sck, uint32_t t_csc, uint32_t t_asc, uint32_t t_dt)
{
    return (CTAR_sck(sck)
            | CTAR_pcs_to_sck_delay(t_csc)
            | CTAR_delay_after_sck(t_asc)
            | CTAR_delay_after_transfer(t_dt));
}

////////////////////////////////////////////////////////////////////////////////
// SCK baud rate to be used for SPI transfers.
// Given the frequency in Hz argument passed in, this function
// returns the relevant bits for use in the CTAR field.
uint32_t CTAR_sck(uint32_t frequency)
{
    uint32_t sck;

#if F_BUS == 60000000
    if (frequency >= 30000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 15000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 10000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 7500000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 6000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 5000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 4285714)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 3750000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 3333333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 3000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 2500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 2142857)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 1875000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 1500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 1428571)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 1250000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 1071428)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 937500)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 750000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 625000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 535714)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 468750)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 375000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 312500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 267857)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 234375)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 187500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 156250)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 133928)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 117187)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 93750)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 78125)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 66964)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 58593)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 46875)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 39062)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 33482)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 29296)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 23437)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 19531)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 16741)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 14648)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 11718)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 9765)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 8370)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 7324)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 5859)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 4882)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 4185)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 3662)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 2929)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 2441)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 2092)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 1831)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 1464)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 1220)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 1046)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 915)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 732)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 610)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 523)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 366)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 56000000
    if (frequency >= 28000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 14000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 9333333)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 7000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 5600000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 4666666)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 3500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 3111111)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 2800000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 2333333)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 1866666)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 1750000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 1400000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 1333333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 1166666)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 875000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 700000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 583333)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 437500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 350000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 291666)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 218750)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 175000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 145833)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 109375)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 87500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 72916)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 54687)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 43750)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 36458)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 27343)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 21875)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 18229)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 13671)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 10937)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 9114)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 6835)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 5468)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 4557)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 3417)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 2734)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 2278)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 1708)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 1367)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 1139)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 854)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 683)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 569)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 341)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 48000000
    if (frequency >= 24000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 12000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 8000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 6000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 4800000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 3428571)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 3000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 2666666)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 2400000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 1714285)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 1600000)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 1500000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 1200000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 1142857)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 857142)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 750000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 600000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 428571)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 375000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 300000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 214285)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 187500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 150000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 107142)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 93750)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 75000)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 53571)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 46875)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 37500)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 26785)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 23437)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 18750)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 13392)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 11718)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 9375)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 6696)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 5859)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 4687)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 3348)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 2929)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 2343)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 1674)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 1464)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 1171)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 837)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 732)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 585)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 418)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 292)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 40000000
    if (frequency >= 20000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 10000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 6666666)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 5000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 3333333)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 2857142)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 2500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 2222222)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 1666666)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 1428571)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 1333333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 1250000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 952380)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 833333)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 714285)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 625000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 416666)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 357142)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 312500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 208333)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 178571)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 156250)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 104166)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 89285)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 78125)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 52083)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 44642)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 39062)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 26041)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 22321)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 19531)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 13020)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 11160)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 9765)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 6510)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 5580)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 4882)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 3255)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 2790)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 2441)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 1627)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 1395)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 1220)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 813)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 697)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 610)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 406)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 348)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 36000000
    if (frequency >= 18000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 9000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 6000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 4500000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 3600000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 3000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 2571428)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 2250000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 1800000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 1500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 1285714)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 1200000)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 1125000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 900000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 857142)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 750000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 642857)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 562500)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 450000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 375000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 321428)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 281250)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 225000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 187500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 160714)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 140625)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 112500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 93750)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 80357)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 70312)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 56250)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 46875)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 40178)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 35156)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 28125)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 23437)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 20089)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 17578)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 14062)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 11718)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 10044)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 8789)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 7031)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 5859)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 5022)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 4394)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 3515)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 2929)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 2511)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 2197)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 1757)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 1464)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 1255)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 1098)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 878)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 732)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 627)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 549)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 439)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 366)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 313)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 219)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 24000000
    if (frequency >= 12000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 6000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 3000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 2400000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 1714285)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 1500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 1333333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 1200000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 857142)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 800000)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 750000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 600000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 571428)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 428571)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 375000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 300000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 214285)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 187500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 150000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 107142)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 93750)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 75000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 53571)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 46875)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 37500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 26785)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 23437)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 18750)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 13392)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 11718)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 9375)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 6696)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 5859)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 4687)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 3348)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 2929)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 2343)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 1674)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 1464)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 1171)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 837)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 732)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 585)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 418)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 366)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 292)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 209)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 146)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 16000000
    if (frequency >= 8000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 2666666)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 1600000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 1333333)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 1142857)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 888888)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 800000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 666666)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 571428)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 533333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 400000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 380952)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 333333)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 285714)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 200000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 166666)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 142857)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 100000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 83333)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 71428)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 50000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 41666)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 35714)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 25000)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 20833)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 17857)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 12500)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 10416)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 8928)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 6250)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 5208)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 4464)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 3125)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 2604)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 2232)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 1562)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 1302)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 1116)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 781)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 651)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 558)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 390)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 325)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 279)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 195)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 162)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 139)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 97)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 8000000
    if (frequency >= 4000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 1333333)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 800000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 666666)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 571428)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 444444)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 400000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 333333)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 285714)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 266666)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 200000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 190476)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 166666)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 142857)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 100000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 83333)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 71428)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 50000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 41666)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 35714)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 25000)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 20833)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 17857)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 12500)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 10416)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 8928)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 6250)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 5208)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 4464)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 3125)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 2604)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 2232)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 1562)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 1302)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 1116)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 781)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 651)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 558)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 390)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 325)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 279)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 195)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 162)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 139)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 122)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 97)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 81)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 69)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 48)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 4000000
    if (frequency >= 2000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 666666)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 400000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 333333)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 285714)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 222222)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 200000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 166666)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 142857)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 133333)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 100000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 95238)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 83333)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 71428)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 50000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 41666)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 35714)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 25000)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 20833)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 17857)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 12500)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 10416)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 8928)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 6250)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 5208)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 4464)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 3125)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 2604)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 2232)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 1562)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 1302)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 1116)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 781)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 651)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 558)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 390)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 325)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 279)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 195)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 162)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 139)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 122)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 97)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 81)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 69)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 61)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 48)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 40)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 34)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 24)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#elif F_BUS == 2000000
    if (frequency >= 1000000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0) | SPI_CTAR_DBR);
    else if (frequency >= 500000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(0));
    else if (frequency >= 333333)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(1));
    else if (frequency >= 250000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(0));
    else if (frequency >= 200000)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(2));
    else if (frequency >= 166666)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(1));
    else if (frequency >= 142857)
        sck = (SPI_CTAR_BR(0) | SPI_CTAR_PBR(3));
    else if (frequency >= 125000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(0));
    else if (frequency >= 111111)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(1));
    else if (frequency >= 100000)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(2));
    else if (frequency >= 83333)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(1));
    else if (frequency >= 71428)
        sck = (SPI_CTAR_BR(1) | SPI_CTAR_PBR(3));
    else if (frequency >= 66666)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(2));
    else if (frequency >= 62500)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(0));
    else if (frequency >= 50000)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(2));
    else if (frequency >= 47619)
        sck = (SPI_CTAR_BR(2) | SPI_CTAR_PBR(3));
    else if (frequency >= 41666)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(1));
    else if (frequency >= 35714)
        sck = (SPI_CTAR_BR(3) | SPI_CTAR_PBR(3));
    else if (frequency >= 31250)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(0));
    else if (frequency >= 25000)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(2));
    else if (frequency >= 20833)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(1));
    else if (frequency >= 17857)
        sck = (SPI_CTAR_BR(4) | SPI_CTAR_PBR(3));
    else if (frequency >= 15625)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(0));
    else if (frequency >= 12500)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(2));
    else if (frequency >= 10416)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(1));
    else if (frequency >= 8928)
        sck = (SPI_CTAR_BR(5) | SPI_CTAR_PBR(3));
    else if (frequency >= 7812)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(0));
    else if (frequency >= 6250)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(2));
    else if (frequency >= 5208)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(1));
    else if (frequency >= 4464)
        sck = (SPI_CTAR_BR(6) | SPI_CTAR_PBR(3));
    else if (frequency >= 3906)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(0));
    else if (frequency >= 3125)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(2));
    else if (frequency >= 2604)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(1));
    else if (frequency >= 2232)
        sck = (SPI_CTAR_BR(7) | SPI_CTAR_PBR(3));
    else if (frequency >= 1953)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(0));
    else if (frequency >= 1562)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(2));
    else if (frequency >= 1302)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(1));
    else if (frequency >= 1116)
        sck = (SPI_CTAR_BR(8) | SPI_CTAR_PBR(3));
    else if (frequency >= 976)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(0));
    else if (frequency >= 781)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(2));
    else if (frequency >= 651)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(1));
    else if (frequency >= 558)
        sck = (SPI_CTAR_BR(9) | SPI_CTAR_PBR(3));
    else if (frequency >= 488)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(0));
    else if (frequency >= 390)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(2));
    else if (frequency >= 325)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(1));
    else if (frequency >= 279)
        sck = (SPI_CTAR_BR(10) | SPI_CTAR_PBR(3));
    else if (frequency >= 244)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(0));
    else if (frequency >= 195)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(2));
    else if (frequency >= 162)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(1));
    else if (frequency >= 139)
        sck = (SPI_CTAR_BR(11) | SPI_CTAR_PBR(3));
    else if (frequency >= 122)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(0));
    else if (frequency >= 97)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(2));
    else if (frequency >= 81)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(1));
    else if (frequency >= 69)
        sck = (SPI_CTAR_BR(12) | SPI_CTAR_PBR(3));
    else if (frequency >= 61)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(0));
    else if (frequency >= 48)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(2));
    else if (frequency >= 40)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(1));
    else if (frequency >= 34)
        sck = (SPI_CTAR_BR(13) | SPI_CTAR_PBR(3));
    else if (frequency >= 30)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(0));
    else if (frequency >= 24)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(2));
    else if (frequency >= 20)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(1));
    else if (frequency >= 17)
        sck = (SPI_CTAR_BR(14) | SPI_CTAR_PBR(3));
    else if (frequency >= 12)
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(2));
    else
        sck = (SPI_CTAR_BR(15) | SPI_CTAR_PBR(3));
#else
# error "F_BUS not valid"
#endif

    return sck;
}

////////////////////////////////////////////////////////////////////////////////
// This is the delay between the assertion of PCS and the first edge of SCK.
// Given the nanosecond PCS to SCK delay argument passed in, this function
// returns the relevant bits for use in the CTAR field.
uint32_t CTAR_pcs_to_sck_delay(uint32_t nanoseconds)
{
    uint32_t t_csc;

#if F_BUS == 60000000
    if (nanoseconds <= 33)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 66)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 100)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 133)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 166)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 200)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 233)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 266)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 333)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 400)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 466)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 533)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 666)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 800)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 933)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1066)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1333)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1600)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1866)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2133)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2666)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3200)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3733)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4266)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5333)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6400)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7466)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8533)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10666)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12800)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14933)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 17066)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 21333)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 25600)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 29866)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 34133)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 42666)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 51200)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 59733)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 68266)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 85333)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 102400)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 119466)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 136533)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 170666)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 204800)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 238933)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 273066)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 341333)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 409600)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 477866)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 546133)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 682666)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 819200)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 955733)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1092266)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1365333)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1638400)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1911466)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2730666)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3276800)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3822933)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 5461333)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 56000000
    if (nanoseconds <= 35)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 71)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 107)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 142)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 178)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 214)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 285)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 357)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 428)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 571)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 714)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 857)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1142)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1428)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1714)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2285)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2857)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3428)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4571)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5714)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6857)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 9142)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 11428)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 13714)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 18285)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 22857)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 27428)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 36571)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 45714)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 54857)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 73142)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 91428)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 109714)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 146285)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 182857)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 219428)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 292571)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 365714)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 438857)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 585142)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 731428)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 877714)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1170285)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1462857)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1755428)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2925714)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3510857)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 5851428)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 48000000
    if (nanoseconds <= 41)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 83)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 125)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 166)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 208)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 291)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 333)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 416)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 583)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 666)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 833)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1166)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1333)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1666)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2333)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2666)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 3333)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4666)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 5333)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 6666)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 9333)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 10666)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 13333)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 18666)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 21333)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 26666)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 37333)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 42666)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 53333)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 74666)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 85333)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 106666)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 149333)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 170666)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 213333)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 298666)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 341333)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 426666)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 597333)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 682666)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 853333)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1194666)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1365333)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1706666)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2389333)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 3413333)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4778666)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 6826666)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 40000000
    if (nanoseconds <= 50)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 100)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 150)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 200)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 300)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 350)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 400)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 600)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 700)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 800)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1200)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1400)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1600)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2400)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2800)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 3200)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4800)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 5600)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 6400)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 9600)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 11200)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 12800)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 19200)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 22400)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 25600)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 38400)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 44800)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 51200)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 76800)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 89600)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 102400)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 153600)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 179200)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 204800)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 307200)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 358400)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 409600)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 614400)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 716800)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 819200)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1228800)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1433600)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1638400)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2457600)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2867200)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4915200)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 5734400)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8192000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 36000000
    if (nanoseconds <= 55)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 111)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 166)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 222)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 277)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 333)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 388)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 444)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 555)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 666)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 777)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 888)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1111)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1333)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1555)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1777)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2222)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2666)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3111)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 3555)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 4444)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 5333)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 6222)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 7111)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 8888)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 10666)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 12444)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 14222)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 17777)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 21333)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 24888)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 28444)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 35555)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 42666)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 49777)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 56888)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 71111)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 85333)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 99555)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 113777)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 142222)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 170666)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 199111)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 227555)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 284444)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 341333)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 398222)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 455111)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 568888)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 682666)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 796444)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 910222)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1137777)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1365333)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1592888)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1820444)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2275555)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2730666)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3185777)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4551111)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 5461333)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 6371555)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 9102222)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 24000000
    if (nanoseconds <= 83)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 166)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 333)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 416)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 583)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 666)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 833)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1166)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1333)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1666)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2333)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2666)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 3333)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4666)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 5333)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 6666)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 9333)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 10666)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 13333)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 18666)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 21333)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 26666)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 37333)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 42666)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 53333)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 74666)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 85333)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 106666)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 149333)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 170666)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 213333)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 298666)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 341333)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 426666)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 597333)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 682666)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 853333)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1194666)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1365333)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1706666)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2389333)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2730666)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 3413333)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4778666)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 6826666)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 8192000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 9557333)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 13653333)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 16000000
    if (nanoseconds <= 125)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 375)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 625)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 750)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 875)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1250)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1500)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1750)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2500)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3500)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 40000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 48000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 56000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 80000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 96000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 112000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 160000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 192000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 224000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 320000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 384000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 448000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 640000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 768000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 896000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1280000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1536000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1792000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2560000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3072000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3584000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5120000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6144000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7168000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 10240000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12288000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14336000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 20480000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 8000000
    if (nanoseconds <= 250)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 750)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1250)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1750)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3500)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 40000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 48000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 56000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 80000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 96000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 112000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 160000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 192000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 224000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 320000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 384000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 448000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 640000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 768000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 896000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1280000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1536000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1792000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2560000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3072000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3584000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5120000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6144000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7168000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8192000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10240000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12288000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14336000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 20480000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24576000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28672000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 40960000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 4000000
    if (nanoseconds <= 500)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1500)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2500)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3500)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 40000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 48000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 56000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 80000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 96000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 112000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 160000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 192000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 224000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 320000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 384000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 448000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 640000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 768000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 896000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1280000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1536000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1792000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2560000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3072000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3584000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5120000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6144000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7168000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8192000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10240000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12288000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14336000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16384000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20480000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24576000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28672000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 40960000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 49152000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 57344000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 81920000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#elif F_BUS == 2000000
    if (nanoseconds <= 1000)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 3000)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 4000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5000)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7000)
        t_csc = (SPI_CTAR_CSSCK(0) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14000)
        t_csc = (SPI_CTAR_CSSCK(1) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28000)
        t_csc = (SPI_CTAR_CSSCK(2) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 32000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 40000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 48000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 56000)
        t_csc = (SPI_CTAR_CSSCK(3) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 64000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 80000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 96000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 112000)
        t_csc = (SPI_CTAR_CSSCK(4) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 128000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 160000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 192000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 224000)
        t_csc = (SPI_CTAR_CSSCK(5) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 256000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 320000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 384000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 448000)
        t_csc = (SPI_CTAR_CSSCK(6) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 512000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 640000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 768000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 896000)
        t_csc = (SPI_CTAR_CSSCK(7) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 1024000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 1280000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 1536000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 1792000)
        t_csc = (SPI_CTAR_CSSCK(8) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 2048000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 2560000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 3072000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 3584000)
        t_csc = (SPI_CTAR_CSSCK(9) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 4096000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 5120000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 6144000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 7168000)
        t_csc = (SPI_CTAR_CSSCK(10) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 8192000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 10240000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 12288000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 14336000)
        t_csc = (SPI_CTAR_CSSCK(11) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 16384000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 20480000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 24576000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 28672000)
        t_csc = (SPI_CTAR_CSSCK(12) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 32768000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(0));
    else if (nanoseconds <= 40960000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 49152000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 57344000)
        t_csc = (SPI_CTAR_CSSCK(13) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 81920000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(2));
    else if (nanoseconds <= 98304000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(1));
    else if (nanoseconds <= 114688000)
        t_csc = (SPI_CTAR_CSSCK(14) | SPI_CTAR_PCSSCK(3));
    else if (nanoseconds <= 163840000)
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(2));
    else
        t_csc = (SPI_CTAR_CSSCK(15) | SPI_CTAR_PCSSCK(3));
#else
# error "F_BUS not valid"
#endif

    return t_csc;
}

////////////////////////////////////////////////////////////////////////////////
// This is the delay between the last edge of SCK and the negation of PCS.
// Given the nanosecond Delay After SCK argument passed in, this
// function returns the relevant bits for use in the CTAR field.
uint32_t CTAR_delay_after_sck(uint32_t nanoseconds)
{
    uint32_t t_asc;

#if F_BUS == 60000000
    if (nanoseconds <= 33)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 66)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 100)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 133)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 166)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 200)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 233)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 266)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 333)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 400)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 466)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 533)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 666)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 800)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 933)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1066)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1333)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1600)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1866)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2133)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2666)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3200)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3733)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4266)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5333)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6400)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7466)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8533)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10666)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12800)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14933)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 17066)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 21333)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 25600)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 29866)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 34133)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 42666)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 51200)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 59733)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 68266)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 85333)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 102400)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 119466)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 136533)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 170666)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 204800)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 238933)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 273066)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 341333)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 409600)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 477866)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 546133)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 682666)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 819200)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 955733)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1092266)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1365333)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1638400)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1911466)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2730666)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3276800)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3822933)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 5461333)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 56000000
    if (nanoseconds <= 35)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 71)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 107)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 142)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 178)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 214)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 285)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 357)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 428)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 571)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 714)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 857)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1142)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1428)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1714)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2285)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2857)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3428)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4571)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5714)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6857)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 9142)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 11428)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 13714)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 18285)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 22857)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 27428)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 36571)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 45714)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 54857)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 73142)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 91428)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 109714)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 146285)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 182857)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 219428)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 292571)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 365714)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 438857)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 585142)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 731428)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 877714)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1170285)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1462857)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1755428)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2925714)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3510857)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 5851428)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 48000000
    if (nanoseconds <= 41)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 83)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 125)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 166)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 208)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 291)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 333)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 416)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 583)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 666)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 833)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1166)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1333)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1666)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2333)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2666)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 3333)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4666)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 5333)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 6666)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 9333)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 10666)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 13333)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 18666)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 21333)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 26666)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 37333)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 42666)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 53333)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 74666)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 85333)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 106666)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 149333)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 170666)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 213333)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 298666)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 341333)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 426666)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 597333)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 682666)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 853333)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1194666)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1365333)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1706666)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2389333)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 3413333)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4778666)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 6826666)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 40000000
    if (nanoseconds <= 50)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 100)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 150)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 200)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 300)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 350)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 400)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 600)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 700)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 800)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1200)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1400)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1600)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2400)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2800)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 3200)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4800)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 5600)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 6400)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 9600)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 11200)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 12800)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 19200)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 22400)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 25600)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 38400)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 44800)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 51200)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 76800)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 89600)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 102400)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 153600)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 179200)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 204800)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 307200)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 358400)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 409600)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 614400)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 716800)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 819200)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1228800)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1433600)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1638400)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2457600)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2867200)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4915200)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 5734400)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8192000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 36000000
    if (nanoseconds <= 55)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 111)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 166)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 222)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 277)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 333)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 388)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 444)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 555)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 666)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 777)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 888)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1111)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1333)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1555)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1777)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2222)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2666)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3111)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 3555)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 4444)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 5333)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 6222)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 7111)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 8888)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 10666)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 12444)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 14222)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 17777)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 21333)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 24888)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 28444)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 35555)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 42666)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 49777)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 56888)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 71111)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 85333)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 99555)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 113777)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 142222)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 170666)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 199111)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 227555)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 284444)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 341333)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 398222)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 455111)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 568888)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 682666)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 796444)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 910222)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1137777)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1365333)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1592888)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1820444)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2275555)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2730666)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3185777)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4551111)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 5461333)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 6371555)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 9102222)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 24000000
    if (nanoseconds <= 83)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 166)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 333)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 416)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 583)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 666)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 833)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1166)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1333)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1666)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2333)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2666)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 3333)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4666)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 5333)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 6666)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 9333)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 10666)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 13333)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 18666)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 21333)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 26666)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 37333)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 42666)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 53333)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 74666)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 85333)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 106666)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 149333)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 170666)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 213333)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 298666)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 341333)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 426666)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 597333)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 682666)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 853333)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1194666)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1365333)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1706666)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2389333)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2730666)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 3413333)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4778666)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 6826666)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 8192000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 9557333)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 13653333)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 16000000
    if (nanoseconds <= 125)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 375)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 625)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 750)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 875)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1250)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1500)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1750)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2500)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3500)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 40000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 48000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 56000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 80000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 96000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 112000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 160000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 192000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 224000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 320000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 384000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 448000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 640000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 768000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 896000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1280000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1536000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1792000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2560000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3072000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3584000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5120000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6144000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7168000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 10240000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12288000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14336000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 20480000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 8000000
    if (nanoseconds <= 250)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 750)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1250)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1750)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3500)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 40000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 48000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 56000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 80000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 96000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 112000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 160000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 192000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 224000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 320000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 384000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 448000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 640000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 768000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 896000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1280000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1536000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1792000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2560000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3072000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3584000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5120000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6144000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7168000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8192000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10240000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12288000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14336000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 20480000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24576000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28672000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 40960000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 4000000
    if (nanoseconds <= 500)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1500)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2500)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3500)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 40000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 48000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 56000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 80000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 96000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 112000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 160000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 192000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 224000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 320000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 384000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 448000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 640000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 768000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 896000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1280000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1536000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1792000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2560000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3072000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3584000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5120000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6144000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7168000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8192000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10240000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12288000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14336000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16384000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20480000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24576000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28672000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 40960000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 49152000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 57344000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 81920000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#elif F_BUS == 2000000
    if (nanoseconds <= 1000)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 3000)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 4000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5000)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7000)
        t_asc = (SPI_CTAR_ASC(0) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14000)
        t_asc = (SPI_CTAR_ASC(1) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28000)
        t_asc = (SPI_CTAR_ASC(2) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 32000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 40000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 48000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 56000)
        t_asc = (SPI_CTAR_ASC(3) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 64000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 80000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 96000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 112000)
        t_asc = (SPI_CTAR_ASC(4) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 128000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 160000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 192000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 224000)
        t_asc = (SPI_CTAR_ASC(5) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 256000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 320000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 384000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 448000)
        t_asc = (SPI_CTAR_ASC(6) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 512000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 640000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 768000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 896000)
        t_asc = (SPI_CTAR_ASC(7) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 1024000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 1280000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 1536000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 1792000)
        t_asc = (SPI_CTAR_ASC(8) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 2048000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 2560000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 3072000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 3584000)
        t_asc = (SPI_CTAR_ASC(9) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 4096000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 5120000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 6144000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 7168000)
        t_asc = (SPI_CTAR_ASC(10) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 8192000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 10240000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 12288000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 14336000)
        t_asc = (SPI_CTAR_ASC(11) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 16384000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 20480000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 24576000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 28672000)
        t_asc = (SPI_CTAR_ASC(12) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 32768000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(0));
    else if (nanoseconds <= 40960000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 49152000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 57344000)
        t_asc = (SPI_CTAR_ASC(13) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 81920000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(2));
    else if (nanoseconds <= 98304000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(1));
    else if (nanoseconds <= 114688000)
        t_asc = (SPI_CTAR_ASC(14) | SPI_CTAR_PASC(3));
    else if (nanoseconds <= 163840000)
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(2));
    else
        t_asc = (SPI_CTAR_ASC(15) | SPI_CTAR_PASC(3));
#else
# error "F_BUS not valid"
#endif

    return t_asc;
}

////////////////////////////////////////////////////////////////////////////////
// This is the time between the negation of the PCS signal at the end of
// a frame and the assertion of PCS at the beginning of the next frame.
// Given the nanosecond Delay After Transfer argument passed in, this
// function returns the relevant bits for use in the CTAR field.
uint32_t CTAR_delay_after_transfer(uint32_t nanoseconds)
{
    uint32_t t_dt;

#if F_BUS == 60000000
    if (nanoseconds <= 33)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 66)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 100)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 133)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 166)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 200)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 233)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 266)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 333)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 400)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 466)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 533)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 666)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 800)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 933)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1066)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1333)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1600)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1866)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2133)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2666)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3200)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3733)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4266)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5333)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6400)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7466)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8533)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10666)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12800)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14933)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 17066)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 21333)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 25600)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 29866)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 34133)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 42666)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 51200)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 59733)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 68266)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 85333)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 102400)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 119466)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 136533)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 170666)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 204800)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 238933)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 273066)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 341333)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 409600)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 477866)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 546133)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 682666)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 819200)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 955733)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1092266)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1365333)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1638400)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1911466)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2730666)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3276800)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3822933)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 5461333)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 56000000
    if (nanoseconds <= 35)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 71)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 107)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 142)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 178)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 214)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 285)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 357)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 428)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 571)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 714)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 857)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1142)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1428)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1714)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2285)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2857)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3428)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4571)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5714)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6857)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 9142)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 11428)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 13714)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 18285)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 22857)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 27428)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 36571)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 45714)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 54857)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 73142)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 91428)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 109714)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 146285)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 182857)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 219428)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 292571)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 365714)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 438857)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 585142)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 731428)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 877714)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1170285)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1462857)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1755428)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2925714)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3510857)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 5851428)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 48000000
    if (nanoseconds <= 41)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 83)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 125)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 166)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 208)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 291)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 333)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 416)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 583)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 666)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 833)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1166)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1333)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1666)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2333)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2666)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 3333)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4666)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 5333)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 6666)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 9333)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 10666)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 13333)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 18666)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 21333)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 26666)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 37333)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 42666)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 53333)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 74666)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 85333)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 106666)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 149333)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 170666)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 213333)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 298666)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 341333)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 426666)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 597333)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 682666)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 853333)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1194666)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1365333)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1706666)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2389333)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 3413333)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4778666)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 6826666)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 40000000
    if (nanoseconds <= 50)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 100)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 150)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 200)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 300)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 350)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 400)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 600)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 700)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 800)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1200)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1400)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1600)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2400)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2800)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 3200)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4800)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 5600)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 6400)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 9600)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 11200)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 12800)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 19200)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 22400)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 25600)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 38400)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 44800)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 51200)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 76800)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 89600)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 102400)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 153600)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 179200)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 204800)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 307200)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 358400)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 409600)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 614400)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 716800)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 819200)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1228800)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1433600)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1638400)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2457600)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2867200)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4915200)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 5734400)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8192000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 36000000
    if (nanoseconds <= 55)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 111)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 166)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 222)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 277)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 333)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 388)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 444)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 555)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 666)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 777)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 888)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1111)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1333)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1555)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1777)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2222)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2666)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3111)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 3555)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 4444)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 5333)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 6222)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 7111)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 8888)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 10666)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 12444)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 14222)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 17777)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 21333)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 24888)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 28444)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 35555)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 42666)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 49777)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 56888)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 71111)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 85333)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 99555)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 113777)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 142222)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 170666)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 199111)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 227555)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 284444)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 341333)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 398222)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 455111)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 568888)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 682666)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 796444)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 910222)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1137777)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1365333)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1592888)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1820444)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2275555)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2730666)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3185777)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4551111)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 5461333)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 6371555)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 9102222)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 24000000
    if (nanoseconds <= 83)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 166)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 333)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 416)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 583)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 666)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 833)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1166)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1333)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1666)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2333)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2666)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 3333)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4666)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 5333)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 6666)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 9333)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 10666)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 13333)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 18666)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 21333)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 26666)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 37333)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 42666)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 53333)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 74666)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 85333)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 106666)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 149333)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 170666)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 213333)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 298666)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 341333)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 426666)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 597333)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 682666)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 853333)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1194666)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1365333)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1706666)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2389333)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2730666)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 3413333)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4778666)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 6826666)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 8192000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 9557333)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 13653333)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 16000000
    if (nanoseconds <= 125)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 375)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 625)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 750)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 875)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1250)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1500)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1750)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2500)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3500)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 40000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 48000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 56000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 80000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 96000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 112000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 160000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 192000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 224000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 320000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 384000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 448000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 640000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 768000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 896000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1280000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1536000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1792000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2560000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3072000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3584000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5120000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6144000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7168000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 10240000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12288000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14336000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 20480000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 8000000
    if (nanoseconds <= 250)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 750)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1250)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1750)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3500)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 40000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 48000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 56000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 80000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 96000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 112000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 160000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 192000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 224000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 320000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 384000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 448000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 640000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 768000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 896000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1280000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1536000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1792000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2560000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3072000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3584000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5120000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6144000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7168000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8192000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10240000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12288000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14336000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 20480000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24576000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28672000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 40960000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 4000000
    if (nanoseconds <= 500)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1500)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2500)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3500)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 40000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 48000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 56000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 80000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 96000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 112000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 160000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 192000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 224000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 320000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 384000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 448000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 640000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 768000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 896000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1280000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1536000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1792000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2560000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3072000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3584000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5120000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6144000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7168000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8192000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10240000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12288000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14336000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16384000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20480000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24576000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28672000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 40960000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 49152000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 57344000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 81920000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#elif F_BUS == 2000000
    if (nanoseconds <= 1000)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 3000)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 4000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5000)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7000)
        t_dt = (SPI_CTAR_DT(0) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14000)
        t_dt = (SPI_CTAR_DT(1) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28000)
        t_dt = (SPI_CTAR_DT(2) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 32000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 40000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 48000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 56000)
        t_dt = (SPI_CTAR_DT(3) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 64000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 80000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 96000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 112000)
        t_dt = (SPI_CTAR_DT(4) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 128000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 160000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 192000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 224000)
        t_dt = (SPI_CTAR_DT(5) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 256000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 320000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 384000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 448000)
        t_dt = (SPI_CTAR_DT(6) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 512000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 640000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 768000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 896000)
        t_dt = (SPI_CTAR_DT(7) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 1024000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 1280000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 1536000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 1792000)
        t_dt = (SPI_CTAR_DT(8) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 2048000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 2560000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 3072000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 3584000)
        t_dt = (SPI_CTAR_DT(9) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 4096000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 5120000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 6144000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 7168000)
        t_dt = (SPI_CTAR_DT(10) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 8192000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 10240000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 12288000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 14336000)
        t_dt = (SPI_CTAR_DT(11) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 16384000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 20480000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 24576000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 28672000)
        t_dt = (SPI_CTAR_DT(12) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 32768000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(0));
    else if (nanoseconds <= 40960000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 49152000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 57344000)
        t_dt = (SPI_CTAR_DT(13) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 81920000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(2));
    else if (nanoseconds <= 98304000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(1));
    else if (nanoseconds <= 114688000)
        t_dt = (SPI_CTAR_DT(14) | SPI_CTAR_PDT(3));
    else if (nanoseconds <= 163840000)
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(2));
    else
        t_dt = (SPI_CTAR_DT(15) | SPI_CTAR_PDT(3));
#else
# error "F_BUS not valid"
#endif

    return t_dt;
}

